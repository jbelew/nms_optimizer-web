/* Tailwind base, theme, and utilities layers */
@import "tailwindcss/preflight.css" layer(base);
@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/utilities.css" layer(utilities);

/* Global box-sizing reset */
*,
*::before,
*::after {
	box-sizing: border-box;
}

/* Apply custom font styles using Tailwind's @layer directive */
.radix-themes {
	--default-font-family: Raleway, Helvetica, Arial, sans-serif;
	--font-family-geosans: "GeosansLight", Helvetica, Arial, sans-serif;
	--font-family-nms: "NMS", "GeosansLight", Helvetica, Arial, sans-serif;
	--letter-spacing-wide: 0.225rem;
	/* Added for common letter-spacing */
	--font-weight-bold: 600;
	/* Added for common bold weight */
	--color-background: var(--gray-a1);
	/* Fixed typo: was --gary-a1 */
}

body.a11y-font .radix-themes {
	--default-font-family: "AtkinsonHyperlegibleNext", Helvetica, Arial, sans-serif;
	--accent-9: #11809c;
}

:root {
	--grid-columns-flex: 10;
	--grid-column-fixed: 24px;

	--grid-padding: 32px;

	--grid-gap-min: 2px;
	--grid-gap-max: 8px;

	--grid-cell-min: 22px;
	--grid-cell-max: 64px;

	/* Available width = viewport - left/right padding */
	--grid-container-width: calc(100dvw - (2 * var(--grid-padding)));

	/* Gap scales, but clamped */
	--grid-gap: clamp(var(--grid-gap-min), 1dvw, var(--grid-gap-max));

	/* Formula: (container - fixed - gaps) / flex-cols, clamped */
	--grid-cell-size: clamp(
		var(--grid-cell-min),
		calc(
			(
					(100dvw - var(--grid-column-fixed)) -
						((var(--grid-columns-flex)) * var(--grid-gap)) -
						(2 * var(--grid-padding) / 2)
				) /
				var(--grid-columns-flex)
		),
		var(--grid-cell-max)
	);
}

/* On non-touch (fine pointer) devices, increase padding */
@media (pointer: fine) and (hover: hover) {
	:root {
		--grid-padding: 48px;
	}
}

html {
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	scrollbar-gutter: stable;
}

body {
	font-family: var(--default-font-family);
	min-height: 100dvh;
	width: 100dvw;
}

@media (max-width: 1023px) {
	body {
		padding-right: calc(100dvw - 100%) !important;
	}
}

@media (max-width: 1023px) {
	html,
	body {
		overflow-x: hidden;
	}
}

.heading-styled {
	letter-spacing: var(--letter-spacing-wide);
	font-family: var(--font-family-geosans);
	font-weight: 400;
	text-transform: uppercase;
	filter: drop-shadow(0 2px 4px var(--accent-a2));
	-webkit-text-stroke: 0.8px;
}

body.a11y-font .heading-styled {
	letter-spacing: normal;
	font-family: var(--default-font-family);
	transform: scaleY(1.1);
	font-weight: 700;
	text-transform: uppercase;
	filter: drop-shadow(0 2px 4px var(--accent-a2));
	-webkit-text-stroke: 0px;
}

.app {
	border: 1px solid var(--accent-surface);
	box-shadow:
		inset 0 0 16px rgba(255, 255, 255, 0.05),
		0 20px 25px -5px rgba(0, 0, 0, 0.1),
		0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.gridContainer__sidebar {
	width: 388px;
	border: 1px solid var(--gray-a2);
	box-shadow:
		inset 0 0 8px rgba(255, 255, 255, 0.05),
		0 4px 6px -1px rgba(0, 0, 0, 0.1),
		0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

.gridContainer__platform {
	font-family: var(--font-family-geosans);
	filter: drop-shadow(0 0 4px var(--accent-6));
}

.button--glow {
	animation: buttonGlow 0.5s infinite alternate ease-in-out;
}

.warningDialog__title {
	font-family: var(--font-family-geosans);
	/* Use variable */
	filter: drop-shadow(0 0 4px var(--accent-6));
	letter-spacing: var(--letter-spacing-wide);
	text-transform: uppercase;
}

footer a {
	color: var(--accent-11);
}

/* Visually hide an element but keep it accessible to screen readers */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

/* ============================================ */
/* PERFORMANCE OPTIMIZATIONS                   */
/* Based on trace analysis 2025-11-16         */
/* ============================================ */

/* Reduce animation complexity for CSS animations */
.button--glow {
	/* Use GPU acceleration for animations */
	will-change: filter;
	/* Only animate filter, avoid layout thrashing */
	transform: translateZ(0);
	backface-visibility: hidden;
}

@keyframes buttonGlow {
	from {
		/* Only animate filter - doesn't trigger layout */
		filter: drop-shadow(0 0 2px var(--accent-a0));
	}

	to {
		filter: drop-shadow(0 0 4px var(--accent-track));
	}
}

/* Optimize main app container for composition */
.app {
	/* Enable GPU acceleration for smooth transitions */
	transform: translateZ(0);
	backface-visibility: hidden;
	/* Prevent subpixel rendering issues */
	-webkit-font-smoothing: antialiased;
}

/* Optimize grid container for layout efficiency */
.gridContainer {
	contain: layout style;
	/* Isolate from parent's layout calculations */
	/* This prevents reflows from affecting child elements */
}

/* Optimize grid cells for isolation */
.gridContainer__container {
	contain: content;
	/* Allow independent layout and styling within this element */
}

/* Reduce paint overhead for buttons */
button,
[role="button"],
.rt-Button {
	/* Isolate button repaints from rest of the page */
	will-change: auto; /* Only when button is active */
	/* Prevents continuous GPU memory allocation */
}

/* Optimize text rendering */
h1,
h2,
h3,
h4,
h5,
h6 {
	/* Ensure text is crisp without GPU overhead */
	-webkit-text-size-adjust: 100%;
	text-rendering: optimizeLegibility;
}

/* Reduce animation overhead when page is hidden */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* Performance: Enable hardware acceleration for smooth scrolling */
html {
	scroll-behavior: smooth;
	/* Enables GPU acceleration for scroll operations */
}

/* Optimize focus states to prevent reflows */
*:focus {
	outline-offset: 2px;
	/* Prevents outline from triggering repaint of adjacent elements */
}
